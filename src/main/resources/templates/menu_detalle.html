<!DOCTYPE html>
<html
        lang="es"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layouts/layout_main.html}" >
<head>
    <th:block th:fragment="cabera">
        <title>Detalle del men√∫ - FitX</title>

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

        <!-- Summernote -->
        <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-lite.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-lite.min.js"></script>

        <style>
            .card img {
                height: 200px;
                object-fit: cover;
            }
        </style>
    </th:block>
</head>

<body>
<main layout:fragment="content">

    <!-- Header -->
    <div class="pt-4 pb-2 mb-4 border-bottom d-flex justify-content-between align-items-center">
        <h2>Men√∫: Almuerzo Saludable - 15/06/2025</h2>
        <div class="d-flex gap-2">
            <button class="btn btn-success" onclick="abrirModalAgregar()">‚ûï Agregar receta</button>
            <button class="btn btn-outline-primary" onclick="location.href='receta_detalle.html'">üìù Crear
                receta
            </button>
            <button class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#modalLista">üìã
                Lista de compras
            </button>
        </div>
    </div>

    <!-- Recetas -->
    <h4 class="mb-3 mt-5">Recetas</h4>
    <div class="row g-4 mb-5">
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <img src="https://www.foodiesfeed.com/wp-content/uploads/ff-images/2024/12/refreshing-lemon-cheesecake-slice-with-mint-garnish.jpg"
                     class="card-img-top" alt="Bavarois de Guanabana">
                <div class="card-body">
                    <h5 class="card-title">Bavarois de Guanabana</h5>
                    <p class="card-text">Un delicioso postre tropical con un toque cremoso.</p>
                    <ul class="list-unstyled">
                        <li>üçΩÔ∏è 4 porciones</li>
                        <li>‚öñÔ∏è 300 g</li>
                        <li>üï∞Ô∏è 30 min</li>
                    </ul>
                    <div class="d-flex justify-content-between">
                        <button class="btn btn-sm btn-warning"
                                onclick="abrirModalEditar('Rollo de Cordon Bleu', 4)">‚úèÔ∏è Editar
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="abrirModalEliminar()">üóëÔ∏è
                            Eliminar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Repetir por cada receta -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <img src="https://www.foodiesfeed.com/wp-content/uploads/ff-images/2025/01/colorful-bowl-of-deliciousness-with-fried-egg.png"
                     class="card-img-top" alt="Roll Criollo">
                <div class="card-body">
                    <h5 class="card-title">Roll Criollo</h5>
                    <p class="card-text">Un plato t√≠pico con un sabor aut√©ntico y delicioso.</p>
                    <ul class="list-unstyled">
                        <li>üçΩÔ∏è 2 porciones</li>
                        <li>‚öñÔ∏è 200 g</li>
                        <li>üï∞Ô∏è 45 min</li>
                    </ul>
                    <div class="d-flex justify-content-between">
                        <button class="btn btn-sm btn-warning"
                                onclick="abrirModalEditar('Rollo de Cordon Bleu', 4)">‚úèÔ∏è Editar
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="abrirModalEliminar()">üóëÔ∏è
                            Eliminar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <img src="https://www.foodiesfeed.com/wp-content/uploads/2023/07/butter-chicken-in-a-pan.jpg"
                     class="card-img-top" alt="Ensalada Fresca">
                <div class="card-body">
                    <h5 class="card-title">Ensalada Fresca</h5>
                    <p class="card-text">Una ensalada ligera y nutritiva con pollo y aguacate.</p>
                    <ul class="list-unstyled">
                        <li>üçΩÔ∏è 2 porciones</li>
                        <li>‚öñÔ∏è 150 g</li>
                        <li>üï∞Ô∏è 20 min</li>
                    </ul>
                    <div class="d-flex justify-content-between">
                        <button class="btn btn-sm btn-warning"
                                onclick="abrirModalEditar('Rollo de Cordon Bleu', 4)">‚úèÔ∏è Editar
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="abrirModalEliminar()">üóëÔ∏è
                            Eliminar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <img src="https://www.foodiesfeed.com/wp-content/uploads/ff-images/2025/05/grilled-lemon-herb-chicken-breasts-on-a-rustic-tray.webp"
                     class="card-img-top" alt="Tostada de Aguacate">
                <div class="card-body">
                    <h5 class="card-title">Tostada de Aguacate</h5>
                    <p class="card-text">Una opci√≥n saludable y deliciosa para el desayuno.</p>
                    <ul class="list-unstyled">
                        <li>üçΩÔ∏è 1 porci√≥n</li>
                        <li>‚öñÔ∏è 100 g</li>
                        <li>üï∞Ô∏è 10 min</li>
                    </ul>
                    <div class="d-flex justify-content-between">
                        <button class="btn btn-sm btn-warning"
                                onclick="abrirModalEditar('Rollo de Cordon Bleu', 4)">‚úèÔ∏è Editar
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="abrirModalEliminar()">üóëÔ∏è
                            Eliminar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <hr class="mt-4">
    <!-- Descripcion -->
    <h4 class="mb-3 d-flex justify-content-between align-items-center mt">
        Descripci√≥n
        <button class="btn btn-sm btn-outline-primary" onclick="abrirModalDescripcion()">‚úèÔ∏è Editar</button>
    </h4>
    <div class="mb-5">
        <p id="textoDescripcion">
            Este men√∫ est√° dise√±ado para ofrecer una experiencia culinaria balanceada y deliciosa, con
            recetas
            que combinan sabores frescos y nutritivos. Cada plato ha sido seleccionado para proporcionar una
            variedad de nutrientes esenciales.
        </p>
    </div>
    <hr class="mt-4">

    <!-- Informaci√≥n Nutricional -->
    <h4 class="mb-3">Informaci√≥n nutricional</h4>
    <div class="table-responsive">
        <table class="table table-striped align-middle mt-4 table-hover">
            <thead class="table-light">
            <tr>
                <th>Plato</th>
                <th>Peso (g)</th>
                <th>Calor√≠as (Kcal)</th>
                <th>Prote√≠nas (g)</th>
                <th>Grasas (g)</th>
                <th>Carbs (g)</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Rollo de Cordon Bleu</td>
                <td>300</td>
                <td>850</td>
                <td>65</td>
                <td>40</td>
                <td>45</td>
            </tr>
            <tr>
                <td>Ensalada C√©sar</td>
                <td>200</td>
                <td>300</td>
                <td>15</td>
                <td>20</td>
                <td>25</td>
            </tr>
            <tr>
                <td>Ensalada C√©sar</td>
                <td>200</td>
                <td>300</td>
                <td>15</td>
                <td>20</td>
                <td>25</td>
            </tr>
            <tr>
                <td>Postre de Frutas</td>
                <td>150</td>
                <td>200</td>
                <td>2</td>
                <td>5</td>
                <td>30</td>
            </tr>
            <!-- Total -->
            <tr class="table-secondary fw-bold">
                <td>Total men√∫</td>
                <td>600</td>
                <td>1400</td>
                <td>80</td>
                <td>60</td>
                <td>90</td>
            </tr>
            <!-- Recomendaci√≥n del sistema -->
            <tr class="table-secondary">
                <td><strong>Recomendaci√≥n diaria</strong></td>
                <td>650</td>
                <td><strong>2000</strong></td>
                <td><strong>75</strong></td>
                <td><strong>70</strong></td>
                <td><strong>260</strong></td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Footer -->
    <footer class="mt-5">
        <div class="d-flex justify-content-between align-items-center">
            <p class="mb-0">Desarrollado por FitX ¬© 2025. Todos los derechos reservados.</p>
            <a href="#" class="text-decoration-none">Pol√≠tica de privacidad</a>
        </div>
    </footer>
</main>

<th:block th:fragment="modales">

    <!-- Modal Lista de compras -->
    <div class="modal fade" id="modalLista" tabindex="-1" aria-labelledby="modalListaLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalListaLabel">Lista de Insumos del Men√∫</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <table class="table table-striped align-middle mt-4 table-hover">
                        <thead class="table-light">
                        <tr>
                            <th>Cantidad</th>
                            <th>Unidad</th>
                            <th>Insumo</th>
                            <th>Usado en</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>kg</td>
                            <td>Pechuga de pollo</td>
                            <td>Rollo de Cordon Bleu</td>
                        </tr>
                        <tr>
                            <td>500</td>
                            <td>g</td>
                            <td>Queso mozzarella</td>
                            <td>Rollo de Cordon Bleu</td>
                        </tr>
                        <tr>
                            <td>200</td>
                            <td>g</td>
                            <td>Lechuga</td>
                            <td>Ensalada C√©sar</td>
                        </tr>
                        <tr>
                            <td>100</td>
                            <td>g</td>
                            <td>Queso parmesano</td>
                            <td>Ensalada C√©sar</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>unidades</td>
                            <td>Limones</td>
                            <td>Rollo de Cordon Bleu</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>kg</td>
                            <td>Tomates cherry</td>
                            <td>Ensalada C√©sar</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>kg</td>
                            <td>Aguacate</td>
                            <td>Tostada de Aguacate</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer justify-content-between">
                    <button class="btn btn-secondary" onclick="window.print()">üñ®Ô∏è Imprimir</button>
                    <button class="btn btn-outline-danger">üì• Descargar PDF</button>
                    <button class="btn btn-success" onclick="enviarWhatsApp()">üì≤ Enviar por WhatsApp</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Agregar/Editar Receta -->
    <div class="modal fade" id="modalReceta" tabindex="-1" aria-labelledby="modalRecetaLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form id="form-receta">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalRecetaLabel">Agregar receta al men√∫</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="busqueda" class="form-label">Buscar receta por nombre o etiqueta</label>
                            <input type="text" class="form-control" id="busqueda"
                                   placeholder="Ej. Ensalada, Prote√≠na...">
                        </div>
                        <div class="mb-3">
                            <label for="raciones" class="form-label">Cantidad de raciones</label>
                            <input type="number" class="form-control" id="raciones" min="1" value="1">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary" id="btn-receta">Agregar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Eliminar Receta -->
    <div class="modal fade" id="modalEliminarReceta" tabindex="-1" aria-labelledby="modalEliminarLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalEliminarLabel">Eliminar receta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    ¬øEst√°s seguro que deseas eliminar esta receta del men√∫?
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button class="btn btn-danger">Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Descripci√≥n -->
    <div class="modal fade" id="modalDescripcion" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form onsubmit="guardarDescripcion(event)">
                    <div class="modal-header">
                        <h5 class="modal-title">Editar descripci√≥n</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div id="inputDescripcion"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</th:block>

<th:block th:fragment="scripts">

    <script>
        function enviarWhatsApp() {
            const mensaje = encodeURIComponent('Lista de compras del men√∫:\n- 1 kg Pechuga de pollo');
            window.open(`https://wa.me/?text=${mensaje}`, '_blank');
        }

        function abrirModalAgregar() {
            document.getElementById('modalRecetaLabel').textContent = 'Agregar receta al men√∫';
            document.getElementById('btn-receta').textContent = 'Agregar';
            document.getElementById('form-receta').reset();
            new bootstrap.Modal(document.getElementById('modalReceta')).show();
        }

        function abrirModalEditar(nombre, raciones) {
            document.getElementById('modalRecetaLabel').textContent = 'Editar receta del men√∫';
            document.getElementById('btn-receta').textContent = 'Modificar';
            document.getElementById('busqueda').value = nombre;
            document.getElementById('raciones').value = raciones;
            new bootstrap.Modal(document.getElementById('modalReceta')).show();
        }

        function abrirModalEliminar() {
            new bootstrap.Modal(document.getElementById('modalEliminarReceta')).show();
        }

        function abrirModalDescripcion() {
            const actual = document.getElementById('textoDescripcion').innerHTML.trim();
            const editor = document.getElementById('inputDescripcion');
            $(editor).summernote({
                height: 250,
                toolbar: [
                    ['style', ['bold', 'italic', 'underline', 'clear']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['insert', ['link']]
                ]
            });
            $(editor).summernote('code', actual);
            new bootstrap.Modal(document.getElementById('modalDescripcion')).show();
        }

        function guardarDescripcion(event) {
            event.preventDefault();
            const nueva = $('#inputDescripcion').summernote('code');
            document.getElementById('textoDescripcion').innerHTML = nueva;
            bootstrap.Modal.getInstance(document.getElementById('modalDescripcion')).hide();
        }

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</th:block>

</body>

</html>